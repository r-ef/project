<html>
    <head>
        <title>student sign up | internly</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body class="ligbody">

        <ul id="navbar">
            <li class="dir" id="logo"><a href="home.html" target="_self"> <img src="website logo.png" height="50" width="auto" /></a> </li>
            <li class="dir" id="navtext"><a href="home.html" target="_self">home</a></li>
            <li class="log" id="navtext"><a href="studentsignin.html" target="_self">student sign in</a></li>
            <li class="log" id="navtext"><a href="companysignin.html" target="_self">company sign in</a></li>
        </ul>

        <form class="ligform" id="studentSignUpForm">
            <table class="signtab" border="0">
                <tr>
                    <td colspan="2" align="center"><h3>student sign up</h3></td>
                </tr>
                <tr>
                    <td>first name:</td>
                    <td><input type="text" class="liginput" name="firstname" size="30" required></td>
                </tr>
                <tr>
                    <td>last name:</td>
                    <td><input type="text" class="liginput" name="lastname" size="30" required></td>
                </tr>
                <tr>
                    <td>date of birth:</td>
                    <td><input type="date" class="ligdate" name="dob" required></td>
                </tr>
                <tr>
                    <td>gender:</td>
                    <td><input type="radio" class="liginput" name="gender" value="f" required>female
                    <input type="radio" class="liginput" name="gender" value="m" required>male</td>
                </tr>
                <tr>
                    <td>email:</td>
                    <td><input type="email" class="liginput" name="email" size="30" required></td>
                </tr>
                <tr>
                    <td>password:</td>
                    <td><input type="password" class="liginput" name="password" size="30" required></td>
                </tr>
                <tr>
                    <td colspan="2"><input type="submit" class="butn" value="sign up"></td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <p>already have an account? <a href="studentsignin.html">sign in here</a></p>
                    </td>
                </tr>
            </table>
        </form>

        <script>
        document.getElementById('studentSignUpForm').addEventListener('submit', async function(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const response = await fetch('http://localhost:3000/studentsignup', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                credentials: 'include',
                body: JSON.stringify({
                    firstname: formData.get('firstname'),
                    lastname: formData.get('lastname'),
                    dob: formData.get('dob'),
                    gender: formData.get('gender'),
                    email: formData.get('email'),
                    password: formData.get('password')
                })
            });
            if (response.ok) {
                window.location.href = 'studenthome.html';
            } else {
                const error = await response.json();
                alert(error.error || 'sign up failed');
            }
        });
        </script>
    </body>
</html>