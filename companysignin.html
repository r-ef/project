<html>
    <head>
        <title>company sign in | internly</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body class="darbody">

        <ul id="darnavbar">
            <li class="dir" id="logo"><a href="home.html" target="_self"> <img src="website admin logo.png" height="50" width="auto" /></a> </li>
            <li class="dir" id="navtext"><a href="home.html" target="_self">home</a></li>
            <li class="log" id="navtext"><a href="studentsignin.html" target="_self">student sign in</a></li>
            <li class="log" id="navtext"><a href="companysignin.html" target="_self">company sign in</a></li>
        </ul>

        <form class="darform" id="companySignInForm">
            <table class="signtab" border="0">
                <tr>
                    <td colspan="2" align="center"><h3>company sign in</h3></td>
                </tr>
                <tr>
                    <td>email:</td>
                    <td><input type="email" class="darinput" name="email" size="30" required></td>
                </tr>
                <tr>
                    <td>password:</td>
                    <td><input type="password" class="darinput" name="password" size="30" required></td>
                </tr>
                <tr>
                    <td colspan="2"><input type="submit" class="butn" value="sign in"></td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <p>don't have an account? <a href="companysignup.html">sign up here</a></p>
                    </td>
                </tr>
            </table>
        </form>

        <script>
        document.getElementById('companySignInForm').addEventListener('submit', async function(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const response = await fetch('http://localhost:3000/companysignin', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                credentials: 'include',
                body: JSON.stringify({
                    email: formData.get('email'),
                    password: formData.get('password')
                })
            });
            if (response.ok) {
                window.location.href = 'companyhome.html';
            } else {
                const error = await response.json();
                alert(error.error || 'sign in failed');
            }
        });
        </script>
    </body>
</html>