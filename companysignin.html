<html>
    <head>
        <title>company sign in | internly</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body class="darbody">
        <img src="website admin logo.png" height="60" width="134" style="display: block; margin-top: 50px; margin-left: auto; margin-right: auto;" />

        <form class="darform" id="companySigninForm">
            <table class="signtab" border="0">
                <tr>
                    <td colspan="2" align="center"><h3>sign in</h3></td>
                </tr>
                <tr>
                    <td>email:</td>
                    <td><input type="email" class="darinput" name="com_email" size="30" required></td>
                </tr>
                <tr>
                    <td>password:</td>
                    <td><input type="password" class="darinput" name="com_pass" size="30" required></td>
                </tr>
                <tr>    
                    <td colspan="2"><input type="submit" class="butn" value="sign in"></td>
                </tr>
            </table>
        </form>

        <form class="darform">
            <table class="signtab" border="0">
                <tr> 
                    <td><h3>don't have an account? <br />
                    sign up now!</h3></td>
                </tr>
                <tr>
                    <td><a href="companysignup.html"><button type="button" class="butn">sign up</button></a></td>
                </tr>
            </table>
        </form>
    </body>

    <script>
    document.getElementById('companySigninForm').addEventListener('submit', async function(event) {
        event.preventDefault();
        const email = document.querySelector('input[name="com_email"]').value;
        const password = document.querySelector('input[name="com_pass"]').value;
        if (email && password) {
            const response = await fetch('http://localhost:3000/companysignin', {
                method: 'POST',
                credentials: 'include',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email, password })
            });
            if (response.ok) {
                alert('sign in successful');
                window.location.href = 'companyhome.html';
            } else {
                alert('sign in failed');
            }
        }
    });
    </script>
</html>